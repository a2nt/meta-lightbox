/*! For license information please see app.js.LICENSE.txt */
!function(t){var e={};function o(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/mnt/data/srv/dist/repositories/meta-lightbox/dist",o(o.s="./src/js/app.js")}({"./src/js/_events.js":function(t,e){t.exports={AJAX:"ajax-load",TABHIDDEN:"tab-hidden",TABFOCUSED:"tab-focused",OFFLINE:"offline",ONLINE:"online",LOADED:"load",SWIPELEFT:"swipeleft panleft",SWIPERIGHT:"swiperight panright",ALLERTAPPEARED:"alert-appeared",ALERTREMOVED:"alert-removed",LODEDANDREADY:"load-ready",LAZYIMAGEREADY:"image-lazy-bg-loaded",LAZYIMAGESREADY:"images-lazy-loaded",MAPLOADED:"map-loaded",MAPAPILOADED:"map-api-loaded",MAPMARKERCLICK:"map-marker-click",MAPPOPUPCLOSE:"map-popup-close",SCROLL:"scroll",RESIZE:"resize",CAROUSEL_READY:"bs.carousel.ready",SET_TARGET_UPDATE:"set-target-update",RESTORE_FIELD:"restore-field",FORM_INIT_BASICS:"form-basics",FORM_INIT_STEPPED:"form-init-stepped",FORM_INIT_VALIDATE:"form-init-validate",FORM_INIT_VALIDATE_FIELD:"form-init-validate-field",FORM_INIT_STORAGE:"form-init-storage",FORM_VALIDATION_FAILED:"form-validation-failed",FORM_STEPPED_NEW_STEP:"form-new-step",FORM_STEPPED_FIRST_STEP:"form-first-step",FORM_STEPPED_LAST_STEP:"form-last-step",FORM_FIELDS:"input,textarea,select"}},"./src/js/app.js":function(t,e,o){"use strict";o.r(e);o("./src/scss/app.scss");var a=o("jquery"),n=o.n(a),i=o("./src/js/_events.js"),r=o.n(i);function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var s,d,u,p,h;s=n.a,d=window,document,u=s("body"),p="MetaLightboxUI",h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,o,a;return e=t,a=[{key:"init",value:function(){console.log("Initializing: ".concat(p));var t=this;t.isMSIE=0;try{t.isHidpi=t.is_hdpi()}catch(e){console.log(t)}s(".js".concat(p,',[data-toggle="lightbox"],[data-lightbox-gallery]')).on("click",(function(e){e.preventDefault(),e.stopPropagation();var o=s(e.currentTarget);t.show(o)}))}},{key:"is_hdpi",value:function(){return console.log("".concat(p,": isHidpi")),d.devicePixelRatio>1||d.matchMedia&&d.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),          (min--moz-device-pixel-ratio: 1.5),          (-o-min-device-pixel-ratio: 3/2),          (min-resolution: 1.5dppx)").matches}},{key:"show",value:function(t){console.log("".concat(p,": show"));var e=this;if(this.constructLightbox()){var o=e.$content;if(o){if(s("body").addClass("meta-lightbox-body-effect-fade"),e.process(o,t),t.data("lightbox-gallery")){var a=s('[data-lightbox-gallery="'.concat(t.data("lightbox-gallery"),'"]'));1===a.length?s(".meta-lightbox-nav").hide():s(".meta-lightbox-nav").show(),s(".meta-lightbox-prev").off("click").on("click",(function(t){t.preventDefault();var e=a.index(currentLink),n=a.eq(e-1);n.length||(n=a.last()),$this.process(o,n)})),s(".meta-lightbox-next").off("click").on("click",(function(t){t.preventDefault();var e=a.index(currentLink);$currentLink=a.eq(e+1),$currentLink.length||($currentLink=a.first()),$this.process(o,$currentLink)}))}setTimeout((function(){e.$overlay.addClass("meta-lightbox-open")}),1)}}}},{key:"constructLightbox",value:function(){console.log("".concat(p,": constructLightbox"));var t=this,e=s("<div>",{class:"meta-lightbox-overlay meta-lightbox-theme-default meta-lightbox-effect-fade"}),o=s("<div>",{class:"meta-lightbox-wrap"}),a=s("<div>",{class:"meta-lightbox-content"}),n=s('<a href="#" class="meta-lightbox-nav meta-lightbox-prev"><i class="fas fa fa-chevron-left"></i> <span class="sr-only">Previous</span></a><a href="#" class="meta-lightbox-nav meta-lightbox-next"><i class="fa fas fa-chevron-right"></i> <span class="sr-only">Next</span></a>'),i=s('<a href="#" class="meta-lightbox-close fas fa fa-times" title="Close"><span class="sr-only">Close</span></a>'),r=s("<div>",{class:"meta-lightbox-title-wrap"});return t.$overlay||(t.isMSIE&&e.addClass("meta-lightbox-ie"),o.append(a),o.append(r),e.append(o),e.append(n),e.append(i),s("body").append(e),e.on("click",(function(e){e.preventDefault(),t.hide()})),i.on("click",(function(e){e.preventDefault(),t.hide()})),t.$overlay=e,t.$content=a,t.$title=r),t.$overlay}},{key:"setTitle",value:function(t){this.$title.html(t)}},{key:"process",value:function(t,e){console.log("".concat(p,": process"));var o=this,a=e.attr("href").length?e.attr("href"):e.data("href");a.length||(console.log(e),console.error("".concat(p,": href(attr/data) is missing")));var n=s("#PageLoading"),i=n.length?n.html():"";if(o.$content.html(i).addClass("meta-lightbox-loading"),a.match(/\.(jpeg|jpg|gif|png|svg)$/i)){var r=s("<img>",{src:a});r.on("load",(function(){var e=s('<div class="meta-lightbox-image"></div>'),a=s('<span class="meta-lightbox-zoom-wrapper"></span>');a.append(r),e.append(a),e.css({"line-height":"".concat(t.height(),"px"),height:"".concat(t.height(),"px")}),s(window).resize((function(){e.css({"line-height":"".concat(t.height(),"px"),height:"".concat(t.height(),"px")})})),"undefined"!==typeof a.zoom&&a.zoom(),o.$content.html(e),o.contentLoaded()})),r.on("error",(function(){var t=s('<div class="meta-lightbox-error"><p class="alert alert-error alert-danger">'.concat($this.options.errorMessage,"</p></div>"));o.$content.html(t),o.contentLoaded()}));var l=e.data("title")?e.data("title"):e.attr("title");o.setTitle(l),"function"===typeof ga&&ga("send","event","meta","Image Click",a)}else if(a.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/)){var d,h=a.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/),f="meta-lightbox-video";if("youtube"==h[1]&&(d="https://www.youtube.com/embed/".concat(h[4]),f="".concat(f," meta-lightbox-youtube")),"youtu"==h[1]&&(d="https://www.youtube.com/embed/".concat(h[3]),f="".concat(f," meta-lightbox-youtube")),"youtube-nocookie"==h[1]&&(d="https://www.youtube-nocookie.com/embed/".concat(h[4]),f="".concat(f," meta-lightbox-youtube")),"vimeo"==h[1]&&(d="https://player.vimeo.com/video/".concat(h[3]),f="".concat(f," meta-lightbox-vimeo")),d){var g=s("<iframe>",{src:d,class:f,frameborder:0,vspace:0,hspace:0,scrolling:"auto"});u.append('<div id="IFramePreload" class="hidden d-none iframe-preload" style="display:none"></div>');var m=s("#IFramePreload");m.html(g),g.on("load",(function(){console.log("".concat(p,": the iframe was loaded")),m.html(""),m.remove(),o.$content.html(g),o.contentLoaded()}))}var b=e.data("title")?e.data("title"):e.attr("title");o.setTitle(b),"function"===typeof ga&&ga("send","event","meta","Video Click",h)}else"#"==a.substring(0,1)?(s(a).length?(wrap=s('<div class="meta-lightbox-inline" />'),wrap.append(s(a).clone().show()),wrap.outerHeight()<content.height()&&wrap.css({position:"relative",top:"50%","margin-top":"".concat(-wrap.outerHeight()/2,"px")}),s(window).resize((function(){wrap.outerHeight()<content.height()&&wrap.css({position:"relative",top:"50%","margin-top":"".concat(-wrap.outerHeight()/2,"px")})})),o.$content.html(wrap),o.contentLoaded()):(wrap=s('<div class="meta-lightbox-error"><p>'.concat($this.options.errorMessage,"</p></div>")),o.$content.html(wrap),o.contentLoaded()),s(".meta-lightbox-title-wrap").html(""),"function"===typeof ga&&ga("send","event","meta","inline HTML click",a)):s.ajax({sync:!1,async:!0,url:a,dataType:"html",method:"GET",cache:!1,statusCode:{404:function(){console.log("page not found"),window.location.href=url},302:function(){console.log("redirect 302"),window.location.href=url}},error:function(t){console.log("AJAX request failure.".concat(t.statusText));var e=s('<div class="meta-lightbox-error"><p>'.concat($this.options.errorMessage,"</p></div>"));o.$content.html(e),o.contentLoaded(),"function"===typeof ga&&ga("send","event","error","AJAX ERROR",t.statusText)},success:function(t,e,a){try{var n=s.parseJSON(t);if("object"===c(n)){"object"===c(n.regions)&&"undefinded"!==typeof n.regions.LayoutAjax&&((l=s('<div class="meta-lightbox-ajax" />')).html(n.regions.LayoutAjax),content.html(l).removeClass("meta-lightbox-loading"));var i=a.getResponseHeader("X-Title"),r=a.getResponseHeader("X-Link");i&&i.length&&r&&r.length&&r!==window.location.href&&r.substring(0,r.indexOf("#"))!==window.location.href.replace(s("base").attr("href"),"/")&&(s(".meta-lightbox-ajax").data("curr-title",document.title),s(".meta-lightbox-ajax").data("curr-link",window.location.href),"undefined"!==typeof window.localStorage&&"/"!==r&&window.localStorage.setItem("current-page",r),document.URL!==r&&document.URL!==s("base").attr("href")+r&&document.URL!=="".concat(s("base").attr("href"),"/").concat(r)&&window.history.pushState({title:i,page:r,ajax:"true"},i,r),s(".meta-lightbox-title-wrap").html(""),"function"===typeof ga&&(ga("set",{page:r.replace(s("base").attr("href"),""),title:i}),ga("send","pageview")))}}catch(d){var l;(l=s('<div class="meta-lightbox-ajax" />')).append(t),content.html(l).removeClass("meta-lightbox-loading")}l.outerHeight()<content.height()&&l.css({position:"relative",top:"50%","margin-top":"".concat(-l.outerHeight()/2,"px")}),s(window).resize((function(){l.outerHeight()<content.height()&&l.css({position:"relative",top:"50%","margin-top":"".concat(-l.outerHeight()/2,"px")})})),setTimeout((function(){s(window).resize(),"function"===typeof window.imagesLoaded&&window.imagesLoaded().then((function(){s(window).resize()}))}),500),o.contentLoaded()}})}},{key:"contentLoaded",value:function(){this.$content.removeClass("meta-lightbox-loading"),setTimeout((function(){s(d).trigger("meta-lightbox-loaded")}),1),setTimeout((function(){u.addClass("meta-lightbox-body-effect-fade")}),600)}},{key:"hide",value:function(t){var e=this.$overlay,o=s(".meta-lightbox-ajax").data("curr-title"),a=s(".meta-lightbox-ajax").data("curr-link");o&&a&&("undefined"!==typeof window.localStorage&&"/"!==a&&window.localStorage.setItem("current-page",a),document.URL!==a&&document.URL!==s("base").attr("href")+a&&document.URL!=="".concat(s("base").attr("href"),"/").concat(a)&&window.history.replaceState({title:o,page:a,ajax:"true"},o,a)),e.removeClass("meta-lightbox-open"),s(".meta-lightbox-nav").hide(),u.removeClass("meta-lightbox-body-effect-fade"),s(".meta-lightbox-content .meta-lightbox-zoom-wrapper").trigger("zoom.destroy"),this.isMSIE&&(e.find("iframe").attr("src"," "),e.find("iframe").remove()),s(".meta-lightbox-prev").off("click"),s(".meta-lightbox-next").off("click"),s(".meta-lightbox-content").empty(),u.removeClass("meta-lightbox-body-effect-fade")}}],(o=null)&&l(e.prototype,o),a&&l(e,a),t}(),s(d).on("".concat(r.a.AJAX," ").concat(r.a.LOADED),(function(){h.init()})),d.MetaLightboxUI=h},"./src/scss/app.scss":function(t,e,o){},jquery:function(t,e){t.exports=jQuery}});
//# sourceMappingURL=app.js.map