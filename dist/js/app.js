/*! For license information please see app.js.LICENSE.txt */
!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/mnt/data/srv/dist/repositories/meta-lightbox/dist",a(a.s="./src/js/app.js")}({"./src/js/_events.js":function(e,t){e.exports={AJAX:"ajax-load",AJAXMAIN:"ajax-main-load",MAININIT:"main-init",TABHIDDEN:"tab-hidden",TABFOCUSED:"tab-focused",OFFLINE:"offline",ONLINE:"online",BACKONLINE:"back-online",TOUCHENABLE:"touch-enabled",TOUCHDISABLED:"touch-disabled",LOADED:"load",SWIPELEFT:"swipeleft panleft",SWIPERIGHT:"swiperight panright",ALLERTAPPEARED:"alert-appeared",ALERTREMOVED:"alert-removed",LODEDANDREADY:"load-ready",LAZYIMAGEREADY:"image-lazy-bg-loaded",LAZYIMAGESREADY:"images-lazy-loaded",MAPLOADED:"map-loaded",MAPAPILOADED:"map-api-loaded",MAPMARKERCLICK:"map-marker-click",MAPPOPUPCLOSE:"map-popup-close",SCROLL:"scroll",RESIZE:"resize",CAROUSEL_READY:"bs.carousel.ready",SET_TARGET_UPDATE:"set-target-update",RESTORE_FIELD:"restore-field",FORM_INIT_BASICS:"form-basics",FORM_INIT_STEPPED:"form-init-stepped",FORM_INIT_VALIDATE:"form-init-validate",FORM_INIT_VALIDATE_FIELD:"form-init-validate-field",FORM_INIT_STORAGE:"form-init-storage",FORM_VALIDATION_FAILED:"form-validation-failed",FORM_STEPPED_NEW_STEP:"form-new-step",FORM_STEPPED_FIRST_STEP:"form-first-step",FORM_STEPPED_LAST_STEP:"form-last-step",FORM_FIELDS:"input,textarea,select"}},"./src/js/app.js":function(e,t,a){"use strict";a.r(t);a("./src/scss/app.scss");var o=a("jquery"),n=a.n(o),i=a("./src/js/_events.js"),r=a.n(i);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s,f,d,u,h,m,p,g;s=n.a,f=window,d=s(f),u=document,h=s("body"),m="MetaLightboxUI",p='<div class="meta-lightbox-error"><div class="alert alert-error alert-danger">Connection failure.</div></div>',g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,o;return t=e,o=[{key:"init",value:function(){console.log("".concat(m,": init ..."));var e=this;e.isMSIE=0;try{e.isHidpi=e.is_hdpi()}catch(t){console.log("".concat(m,": catch"))}s(".js".concat(m,',[data-toggle="lightbox"],[data-lightbox-gallery]')).on("click",(function(t){t.preventDefault(),t.stopPropagation();var a=s(t.currentTarget);e.show(a)}))}},{key:"is_hdpi",value:function(){return console.log("".concat(m,": isHidpi")),f.devicePixelRatio>1||f.matchMedia&&f.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),          (min--moz-device-pixel-ratio: 1.5),          (-o-min-device-pixel-ratio: 3/2),          (min-resolution: 1.5dppx)").matches}},{key:"show",value:function(e){console.log("".concat(m,": show"));var t=this;if(t.constructLightbox()){var a=t.$content;if(a){if(h.addClass("meta-lightbox-body-effect-fade"),t.process(a,e),e.data("lightbox-gallery")){var o=s('[data-lightbox-gallery="'.concat(e.data("lightbox-gallery"),'"]'));1===o.length?s(".meta-lightbox-nav").hide():s(".meta-lightbox-nav").show(),s(".meta-lightbox-prev").off("click").on("click",(function(a){a.preventDefault();var n=o.index(e),i=o.eq(n-1);i.length||(i=o.last()),setTimeout((function(){t.show(i)}),10)})),s(".meta-lightbox-next").off("click").on("click",(function(a){a.preventDefault();var n=o.index(e),i=o.eq(n+1);i.length||(i=o.first()),setTimeout((function(){t.show(i)}),10)}))}setTimeout((function(){t.$overlay.addClass("meta-lightbox-open")}),1)}}}},{key:"constructLightbox",value:function(){console.log("".concat(m,": constructLightbox"));var e=this,t=s("<div>",{class:"meta-lightbox-overlay meta-lightbox-theme-default meta-lightbox-effect-fade"}),a=s("<div>",{class:"meta-lightbox-wrap"}),o=s("<div>",{class:"meta-lightbox-content"}),n=s('<a href="#" class="meta-lightbox-nav meta-lightbox-prev"><i class="fas fa fa-chevron-left"></i> <span class="sr-only">Previous</span></a><a href="#" class="meta-lightbox-nav meta-lightbox-next"><i class="fa fas fa-chevron-right"></i> <span class="sr-only">Next</span></a>'),i=s('<a href="#" class="meta-lightbox-close fas fa fa-times" title="Close"><span class="sr-only">Close</span></a>'),r=s("<div>",{class:"meta-lightbox-title-wrap"});return e.$overlay||(e.isMSIE&&t.addClass("meta-lightbox-ie"),a.append(o),a.append(r),t.append(a),t.append(n),t.append(i),h.append(t),t.on("click",(function(t){t.preventDefault(),e.hide()})),i.on("click",(function(t){t.preventDefault(),e.hide()})),e.$overlay=t,e.$content=o,e.$title=r),e.$overlay}},{key:"setTitle",value:function(e){this.$title.html(e)}},{key:"process",value:function(e,t){console.log("".concat(m,": process"));var a=this,o=t.attr("href")&&t.attr("href").length?t.attr("href"):t.data("href");a.$content.attr("class","meta-lightbox-content"),a.$content.addClass(t.data("lightbox-class")),o.length||(console.log(t),console.error("".concat(m,": href(attr/data) is missing")));var n=s("#PageLoading .loading-spinner"),i=n.length?n.clone():"";if(a.$content.append(i).addClass("meta-lightbox-loading"),o.match(/\.(jpeg|jpg|gif|png|svg)$/i)){s.ajax({url:o,success:function(){var t=s("<img>",{src:o}),n=s('<div class="meta-lightbox-image"></div>'),i=s('<span class="meta-lightbox-zoom-wrapper"></span>');i.append(t),n.append(i),n.css({"line-height":"".concat(e.height(),"px"),height:"".concat(e.height(),"px")}),d.resize((function(){n.css({"line-height":"".concat(e.height(),"px"),height:"".concat(e.height(),"px")})})),"undefined"!==typeof i.zoom?i.zoom():i.addClass("no-zoom"),a.$content.html(n),a.contentLoaded()},error:function(e,t){var o=s(p);a.$content.html(o),a.contentLoaded()}});var r=t.data("title")?t.data("title"):t.attr("title");a.setTitle(r),"function"===typeof ga&&ga("send","event","meta","Image Click",o)}else if(o.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/)){var c,h=o.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/),g="meta-lightbox-video";if("youtube"==h[1]&&(c="https://www.youtube.com/embed/".concat(h[4]),g="".concat(g," meta-lightbox-youtube")),"youtu"==h[1]&&(c="https://www.youtube.com/embed/".concat(h[3]),g="".concat(g," meta-lightbox-youtube")),"youtube-nocookie"==h[1]&&(c="https://www.youtube-nocookie.com/embed/".concat(h[4]),g="".concat(g," meta-lightbox-youtube")),"vimeo"==h[1]&&(c="https://player.vimeo.com/video/".concat(h[3]),g="".concat(g," meta-lightbox-vimeo")),!c)return console.warn("".concat(m,": Video loading bad URL")),!1;if(!a.loadIframe(c,g))return t.addClass("meta-offline"),!1;t.removeClass("meta-offline");var b=t.data("title")?t.data("title"):t.attr("title");a.setTitle(b),"function"===typeof ga&&ga("send","event","meta","Video Click",h)}else if("#"==o.substring(0,1))s(o).length?(wrap=s('<div class="meta-lightbox-inline" />'),wrap.append(s(o).clone().show()),wrap.outerHeight()<a.$content.height()&&wrap.css({position:"relative",top:"50%","margin-top":"".concat(-wrap.outerHeight()/2,"px")}),d.resize((function(){wrap.outerHeight()<a.$content.height()&&wrap.css({position:"relative",top:"50%","margin-top":"".concat(-wrap.outerHeight()/2,"px")})})),a.$content.html(wrap),a.contentLoaded()):(wrap=s(p),a.$content.html(wrap),a.contentLoaded()),s(".meta-lightbox-title-wrap").html(""),"function"===typeof ga&&ga("send","event","meta","inline HTML click",o);else{if(t.data("force-iframe"))return console.log("".concat(m,": IFrame forced")),a.loadIframe(o,"meta-lightbox-iframe-content")?(t.removeClass("meta-offline"),!0):(t.addClass("meta-offline"),!1);console.log("".concat(m,": loading AJAX")),s.ajax({sync:!1,async:!0,url:o,dataType:"html",method:"GET",cache:!1,statusCode:{404:function(){console.log("".concat(m,": page not found")),f.location.href=url},302:function(){console.log("".concat(m,": redirect 302")),f.location.href=url}},error:function(e,t){console.log("".concat(m,": AJAX request failure.").concat(e.statusText));var o=s(p);a.$content.html(o),a.contentLoaded(),"function"===typeof ga&&ga("send","event","error","AJAX ERROR",e.statusText)},success:function(e,t,o){try{var n=s.parseJSON(e);if("object"===l(n)){if("object"===l(n.regions)&&"undefinded"!==typeof n.regions.LayoutAjax){var i=s('<div class="meta-lightbox-ajax" />');i.html(n.regions.LayoutAjax),a.$content.html(i),a.contentLoaded()}var r=o.getResponseHeader("X-Title"),c=o.getResponseHeader("X-Link");r&&r.length&&c&&c.length&&c!==f.location.href&&c.substring(0,c.indexOf("#"))!==f.location.href.replace(s("base").attr("href"),"/")&&(s(".meta-lightbox-ajax").data("curr-title",u.title),s(".meta-lightbox-ajax").data("curr-link",f.location.href),"undefined"!==typeof f.localStorage&&"/"!==c&&f.localStorage.setItem("current-page",c),u.URL!==c&&u.URL!==s("base").attr("href")+c&&u.URL!=="".concat(s("base").attr("href"),"/").concat(c)&&f.history.pushState({title:r,page:c,ajax:"true"},r,c),s(".meta-lightbox-title-wrap").html(""),"function"===typeof ga&&(ga("set",{page:c.replace(s("base").attr("href"),""),title:r}),ga("send","pageview")))}}catch(h){var d=s('<div class="meta-lightbox-ajax" />');d.append(e),a.$content.html(d),a.contentLoaded()}a.contentLoaded()}})}}},{key:"loadIframe",value:function(e,t){var a=this,o=s("<iframe>",{src:e,class:t,frameborder:0,vspace:0,hspace:0,scrolling:"auto",allowtransparency:"true"});console.log("".concat(m,": loading iframe")),h.append('<div id="MetaIFramePreload" class="hidden d-none iframe-preload" style="display:none"></div>');var n=s("#MetaIFramePreload");return n.html(o),o.on("load",(function(){if(h.hasClass("is-offline"))return console.warn("".concat(m,": Unable to load iframe offline")),!1;a.finishIFrameLoading(n,o)})),o}},{key:"finishIFrameLoading",value:function(){var e=this;console.log("".concat(m,": the iframe was loaded")),$preload.html(""),$preload.remove(),e.$content.addClass("iframe-delay"),e.$content.html($iframe),e.contentLoaded(),setTimeout((function(){e.$content.removeClass("iframe-delay")}),1e3)}},{key:"contentLoaded",value:function(){this.$content.removeClass("meta-lightbox-loading"),setTimeout((function(){d.trigger("meta-lightbox-loaded")}),1),setTimeout((function(){h.addClass("meta-lightbox-body-effect-fade")}),600)}},{key:"hide",value:function(e){var t=this.$overlay,a=s(".meta-lightbox-ajax").data("curr-title"),o=s(".meta-lightbox-ajax").data("curr-link");a&&o&&("undefined"!==typeof f.localStorage&&"/"!==o&&f.localStorage.setItem("current-page",o),u.URL!==o&&u.URL!==s("base").attr("href")+o&&u.URL!=="".concat(s("base").attr("href"),"/").concat(o)&&f.history.replaceState({title:a,page:o,ajax:"true"},a,o)),t.removeClass("meta-lightbox-open"),h.removeClass("meta-lightbox-body-effect-fade"),s(".meta-lightbox-content .meta-lightbox-zoom-wrapper").trigger("zoom.destroy"),this.isMSIE&&(t.find("iframe").attr("src"," "),t.find("iframe").remove()),s(".meta-lightbox-prev").off("click"),s(".meta-lightbox-next").off("click"),s(".meta-lightbox-content").empty(),h.removeClass("meta-lightbox-body-effect-fade")}}],(a=null)&&c(t.prototype,a),o&&c(t,o),e}(),d.on("MetaLightboxUI.init ".concat(r.a.AJAX," ").concat(r.a.LOADED),(function(){g.init()})),d.on("".concat(r.a.BACKONLINE),(function(){s(".meta-offline").removeClass("meta-offline"),console.log("".concat(m,": reloading iframe"));var e=s("#MetaIFramePreload");if(e.length){var t=e.find("iframe");t.length&&g.finishIFrameLoading(e,t)}var a=s(".meta-lightbox-content iframe");a.length&&a.attr("src",a.attr("src"))})),f.MetaLightboxUI=g},"./src/scss/app.scss":function(e,t,a){},jquery:function(e,t){e.exports=jQuery}});
//# sourceMappingURL=app.js.map