/*! For license information please see app.js.LICENSE.txt */
!function(){"use strict";var t={n:function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,{a:o}),o},d:function(e,o){for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e=jQuery,o="ajax-load",a="back-online",n="load";function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}!function(t){var e=window,l=t(e),r=document,s=t("body"),f="MetaLightboxUI",h='<div class="meta-lightbox-error"><div class="alert alert-error alert-danger">Connection failure.</div></div>',d=function(){function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o)}var a,n,d;return a=o,d=[{key:"init",value:function(){console.log("".concat(f,": init ..."));var e=this;e.isMSIE=0;try{e.isHidpi=e.is_hdpi()}catch(o){console.log("".concat(f,": catch"))}t(".js".concat(f,',[data-toggle="lightbox"],[data-lightbox-gallery]')).on("click",(function(o){o.preventDefault(),o.stopPropagation();var a=t(o.currentTarget);e.show(a)})),t(".js".concat(f,"-close-inline")).on("click",(function(e){t(e.currentTarget).parents(".meta-lightbox-overlay").removeClass("meta-lightbox-open")}))}},{key:"is_hdpi",value:function(){return console.log("".concat(f,": isHidpi")),e.devicePixelRatio>1||e.matchMedia&&e.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),          (min--moz-device-pixel-ratio: 1.5),          (-o-min-device-pixel-ratio: 3/2),          (min-resolution: 1.5dppx)").matches}},{key:"show",value:function(e){console.log("".concat(f,": show"));var o=this;if(o.constructLightbox()){var a=o.$content;if(a){if(s.addClass("meta-lightbox-body-effect-fade"),o.process(a,e),e.data("lightbox-gallery")){var n=t('[data-lightbox-gallery="'.concat(e.data("lightbox-gallery"),'"]'));1===n.length?t(".meta-lightbox-nav").hide():t(".meta-lightbox-nav").show(),t(".meta-lightbox-prev").off("click").on("click",(function(t){t.preventDefault();var a=n.index(e),i=n.eq(a-1);i.length||(i=n.last()),setTimeout((function(){o.show(i)}),10)})),t(".meta-lightbox-next").off("click").on("click",(function(t){t.preventDefault();var a=n.index(e),i=n.eq(a+1);i.length||(i=n.first()),setTimeout((function(){o.show(i)}),10)}))}setTimeout((function(){o.$overlay.addClass("meta-lightbox-open")}),1)}}}},{key:"constructLightbox",value:function(){console.log("".concat(f,": constructLightbox"));var e=this,o=t("<div>",{class:"meta-lightbox-overlay meta-lightbox-theme-default meta-lightbox-effect-fade"}),a=t("<div>",{class:"meta-lightbox-wrap"}),n=t("<div>",{class:"meta-lightbox-content"}),i=t('<a href="#" class="meta-lightbox-nav meta-lightbox-prev"><i class="fas fa fa-chevron-left"></i> <span class="sr-only">Previous</span></a><a href="#" class="meta-lightbox-nav meta-lightbox-next"><i class="fa fas fa-chevron-right"></i> <span class="sr-only">Next</span></a>'),c=t('<a href="#" class="meta-lightbox-close fas fa fa-times" title="Close"><span class="sr-only">Close</span></a>'),l=t("<div>",{class:"meta-lightbox-title-wrap"});return e.$overlay||(e.isMSIE&&o.addClass("meta-lightbox-ie"),a.append(n),a.append(l),o.append(a),o.append(i),o.append(c),s.append(o),o.on("click",(function(t){t.preventDefault(),e.hide()})),c.on("click",(function(t){t.preventDefault(),e.hide()})),e.$overlay=o,e.$content=n,e.$title=l),e.$overlay}},{key:"setTitle",value:function(t){this.$title.html(t)}},{key:"process",value:function(o,a){console.log("".concat(f,": process"));var n=this,c=a.attr("href")&&a.attr("href").length?a.attr("href"):a.data("href");n.$content.attr("class","meta-lightbox-content"),n.$content.addClass(a.data("lightbox-class")),c.length||(console.log(a),console.error("".concat(f,": href(attr/data) is missing")));var s=t("#PageLoading .loading-spinner"),d=s.length?s.clone():"";if(n.$content.append(d).addClass("meta-lightbox-loading"),c.match(/\.(jpeg|jpg|gif|png|svg)$/i)){t.ajax({url:c,success:function(){var e=t("<img>",{src:c}),a=t('<div class="meta-lightbox-image"></div>'),i=t('<span class="meta-lightbox-zoom-wrapper"></span>');i.append(e),a.append(i),a.css({"line-height":"".concat(o.height(),"px"),height:"".concat(o.height(),"px")}),l.resize((function(){a.css({"line-height":"".concat(o.height(),"px"),height:"".concat(o.height(),"px")})})),"undefined"!==typeof i.zoom?i.zoom():i.addClass("no-zoom"),n.$content.html(a),n.contentLoaded()},error:function(e,o){var a=t(h);n.$content.html(a),n.contentLoaded()}});var g=a.data("title")?a.data("title"):a.attr("title");n.setTitle(g),"function"===typeof ga&&ga("send","event","meta","Image Click",c)}else if(c.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/)){var u,m=c.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/),p="meta-lightbox-video";if("youtube"==m[1]&&(u="https://www.youtube.com/embed/".concat(m[4]),p="".concat(p," meta-lightbox-youtube")),"youtu"==m[1]&&(u="https://www.youtube.com/embed/".concat(m[3]),p="".concat(p," meta-lightbox-youtube")),"youtube-nocookie"==m[1]&&(u="https://www.youtube-nocookie.com/embed/".concat(m[4]),p="".concat(p," meta-lightbox-youtube")),"vimeo"==m[1]&&(u="https://player.vimeo.com/video/".concat(m[3]),p="".concat(p," meta-lightbox-vimeo")),!u)return console.warn("".concat(f,": Video loading bad URL")),!1;if(!n.loadIframe(u,p))return a.addClass("meta-offline"),!1;a.removeClass("meta-offline");var b=a.data("title")?a.data("title"):a.attr("title");n.setTitle(b),"function"===typeof ga&&ga("send","event","meta","Video Click",m)}else if("#"==c.substring(0,1))t(c).length?(wrap=t('<div class="meta-lightbox-inline" />'),wrap.append(t(c).clone().show()),wrap.outerHeight()<n.$content.height()&&wrap.css({position:"relative",top:"50%","margin-top":"".concat(-wrap.outerHeight()/2,"px")}),l.resize((function(){wrap.outerHeight()<n.$content.height()&&wrap.css({position:"relative",top:"50%","margin-top":"".concat(-wrap.outerHeight()/2,"px")})})),n.$content.html(wrap),n.contentLoaded()):(wrap=t(h),n.$content.html(wrap),n.contentLoaded()),t(".meta-lightbox-title-wrap").html(""),"function"===typeof ga&&ga("send","event","meta","inline HTML click",c);else{if(a.data("force-iframe"))return console.log("".concat(f,": IFrame forced")),n.loadIframe(c,"meta-lightbox-iframe-content")?(a.removeClass("meta-offline"),!0):(a.addClass("meta-offline"),!1);console.log("".concat(f,": loading AJAX")),t.ajax({sync:!1,async:!0,url:c,dataType:"html",method:"GET",cache:!1,statusCode:{404:function(){console.log("".concat(f,": page not found")),e.location.href=url},302:function(){console.log("".concat(f,": redirect 302")),e.location.href=url}},error:function(e,o){console.log("".concat(f,": AJAX request failure.").concat(e.statusText));var a=t(h);n.$content.html(a),n.contentLoaded(),"function"===typeof ga&&ga("send","event","error","AJAX ERROR",e.statusText)},success:function(o,a,c){console.log("".concat(f,": AJAX success"));try{var l=t.parseJSON(o);if("object"===i(l)){if(console.log("".concat(f,": AJAX JSON")),"object"===i(l.regions)&&"undefinded"!==typeof l.regions.LayoutAjax){var s=t('<div class="meta-lightbox-ajax" />');s.html(l.regions.LayoutAjax),n.$content.html(s),n.contentLoaded()}var h=c.getResponseHeader("X-Title"),d=c.getResponseHeader("X-Link");h&&h.length&&d&&d.length&&d!==e.location.href&&d.substring(0,d.indexOf("#"))!==e.location.href.replace(t("base").attr("href"),"/")&&(t(".meta-lightbox-ajax").data("curr-title",r.title),t(".meta-lightbox-ajax").data("curr-link",e.location.href),"undefined"!==typeof e.localStorage&&"/"!==d&&e.localStorage.setItem("current-page",d),r.URL!==d&&r.URL!==t("base").attr("href")+d&&r.URL!=="".concat(t("base").attr("href"),"/").concat(d)&&e.history.pushState({title:h,page:d,ajax:"true"},h,d),t(".meta-lightbox-title-wrap").html(""),"function"===typeof ga&&(ga("set",{page:d.replace(t("base").attr("href"),""),title:h}),ga("send","pageview")))}}catch(u){console.log("".concat(f,": AJAX HTML"));var g=t('<div class="meta-lightbox-ajax" />');g.append(o),n.$content.html(g),n.contentLoaded()}n.contentLoaded()}})}}},{key:"loadIframe",value:function(e,o){var a=this,n=t("<iframe>",{src:e,class:o,frameborder:0,vspace:0,hspace:0,scrolling:"auto",allowtransparency:"true"});return console.log("".concat(f,": loading iframe")),s.append('<div id="MetaIFramePreload" class="hidden d-none iframe-preload" style="display:none"></div>'),t("#MetaIFramePreload").html(n),n.on("load",(function(){if(s.hasClass("is-offline"))return console.warn("".concat(f,": Unable to load iframe offline")),!1;a.finishIFrameLoading()})),n}},{key:"finishIFrameLoading",value:function(){var e=this,o=t("#MetaIFramePreload");if(!o.length)return console.warn("".concat(f,": iframe preload not found")),!1;var a=o.find("iframe");if(!a.length)return console.warn("".concat(f,": iframe preload > iframe not found")),!1;console.log("".concat(f,": the iframe was loaded")),o.html(""),o.remove(),e.$content.addClass("iframe-delay"),e.$content.html(a),e.contentLoaded(),setTimeout((function(){e.$content.removeClass("iframe-delay")}),1e3)}},{key:"contentLoaded",value:function(){var e=this;e.$content.removeClass("meta-lightbox-loading"),t(".meta-lightbox-content .js".concat(f,',.meta-lightbox-content [data-toggle="lightbox"],.meta-lightbox-content [data-lightbox-gallery]')).on("click",(function(o){o.preventDefault(),o.stopPropagation();var a=t(o.currentTarget);e.show(a)})),t(".js".concat(f,"-close")).on("click",(function(t){t.preventDefault(),e.hide()})),setTimeout((function(){l.trigger("meta-lightbox-loaded")}),1),setTimeout((function(){s.addClass("meta-lightbox-body-effect-fade")}),600)}},{key:"hide",value:function(o){var a=this.$overlay,n=t(".meta-lightbox-ajax").data("curr-title"),i=t(".meta-lightbox-ajax").data("curr-link");n&&i&&("undefined"!==typeof e.localStorage&&"/"!==i&&e.localStorage.setItem("current-page",i),r.URL!==i&&r.URL!==t("base").attr("href")+i&&r.URL!=="".concat(t("base").attr("href"),"/").concat(i)&&e.history.replaceState({title:n,page:i,ajax:"true"},n,i)),a.removeClass("meta-lightbox-open"),s.removeClass("meta-lightbox-body-effect-fade"),t(".meta-lightbox-content .meta-lightbox-zoom-wrapper").trigger("zoom.destroy"),this.isMSIE&&(a.find("iframe").attr("src"," "),a.find("iframe").remove()),t(".meta-lightbox-prev").off("click"),t(".meta-lightbox-next").off("click"),t(".meta-lightbox-content").empty(),s.removeClass("meta-lightbox-body-effect-fade")}}],(n=null)&&c(a.prototype,n),d&&c(a,d),o}();l.on("MetaLightboxUI.init ".concat(o," ").concat(n),(function(){d.init()})),l.on("".concat(a),(function(){t(".meta-offline").removeClass("meta-offline"),console.log("".concat(f,": reloading iframe")),d.finishIFrameLoading();var e=t(".meta-lightbox-content iframe");e.length&&e.attr("src",e.attr("src"))})),e.MetaLightboxUI=d}(t.n(e)())}();